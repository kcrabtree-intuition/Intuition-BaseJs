!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):this[e]=t()}("domready",function(){var e,t=[],n="object"==typeof document&&document,r=n&&n.documentElement.doScroll,o="DOMContentLoaded",a=n&&(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return!a&&n&&n.addEventListener(o,e=function(){for(n.removeEventListener(o,e),a=1;e=t.shift();)e()}),function(e){a?setTimeout(e,0):t.push(e)}}),function(){var e=0,t="spinner-border spinner-border-sm",n=function(){var t=new Date,n="iid_"+t.getTime()+"_"+e++;return n},r=function(e){return null!=e},o=function(e){return s(e)?e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,""):e},a=function(e){if(r(e)){if(c(e))return e;if(s(e))return Boolean(e)}return!1},i=function(e){return"function"==typeof e},u=function(e){var t=Object.prototype.toString.call(e);return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(t)&&"number"==typeof e.length&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},l=function(e){return!!(r(e)&&r(e.pop)&&r(e.push)&&r(e.slice))},s=function(e){return"string"==typeof e},c=function(e){return"boolean"==typeof e},d=function(e){return!!(r(e)&&r(e.tagName)&&r(e.nodeName))},f=function(e){return!(!s(e)||!(e.indexOf("/")>=0||e.indexOf("\\")>=0))},m=function(e){try{JSON.parse(e);return!0}catch(e){return!1}},p=function(e){return!(!d(e)||"input"!=e.tagName.toLowerCase()&&"textarea"!=e.tagName.toLowerCase())},v=function(e){return r(e)?e.currentTarget||e.srcElement||e.originalTarget||e:null},g=function(e){return r(e)?document.getElementById(e):null},y=function(e,t){var n=null;return n=b(e,t),r(n)&&l(n)?n[0]:n},b=function(e,t){var n=null;return s(e)&&(n=r(t)?t.querySelector(e):document.querySelector(e)),n},h=function(e){var t=g(e);if(r(t))return t.value},L=function(e){var t=r(e)?e.attributes:null,n=0,o=r(t)?t.length:0;for(n=0;n<o;n++)if(isUrlAttribute(t[n]))return t[n].value;return null},E=function(){document.getElementsByTagName("form");return r(vform)&&vform.count>0?vform[0]:null},T=function(e){var t=d(e)?e.getElementsByName("__RequestVerificationToken"):document.getElementsByName("__RequestVerificationToken");return u(t)?t[0]:null},N=function(e,t){d(e)&&(e.style.opacity=1,e.style.display=r(t)?t:"block")},w=function(e){d(e)&&(e.style.display="none")},B=function(e){d(e)&&(e.style.opacity=1,(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(fade))},C=function(e,t){},j=function(){for(var e=document.getElementsByClassName("field-validation-error"),t=0;t<e.length;t++)if(""!==e[t].innerHTML){var n=g(e[t].dataset.valmsgFor.replace(".","_"));r(n)&&n.classList.add("is-invalid")}},S=function(){var e=null,r=n(),o=this,a=o.innerHTML;return o.innerHTML="",o.setAttribute("disabled","disabled"),e=document.createElement("div"),e.id=r,e.className=t,this.appendChild(e),{id:r,html:a}},F=function(e,t){if(r(t)){var n=g(t.id);r(n)&&(e.removeChild(n),e.innerHTML=t.html,e.removeAttribute("disabled"))}},M=function(e){if(d(e))return new FormData(e);var t=new FormData,n=T();return r(n)&&t.append(n.name,n.value),t},H=function(e,t){return d(e)&&s(t)?e.dataset[o("basejs "+t)]:null},O=function(e){if(r(e)){var t=document.getElementsByClassName("validation-summary-errors");if(r(t))for(var n=0;n<t.length;n++)t[n].remove()}},q=function(e,t,n,o,a,i){var u=new XMLHttpRequest,l={};u.open(r(i)?i:"POST",e,!0),u.onreadystatechange=function(){this.readyState==XMLHttpRequest.DONE&&(l.response=u.responseText,l.statusCode=u.status,200==this.status?n(l):o(l),a())},u.send(t)},A=function(e,t,n,o,u,c,d){var f=v(e),p=r(f)?f:E(),b=null,h=null,L=r(t)?t:H(p,"posturl"),T=r(n)?n:H(p,"updatetarget"),N=r(d)?d:H(p,"closemodaltarget"),w=null,B=function(e){O(p);var t=e.response;if(m(t)){const e=JSON.parse(t);"redirect"===e.type&&(location.href=e.url)}else{var n=g(T);if(r(n)&&(n.innerHTML=e.response),r(basejs.modals)&&s(N)){var a=bootstrap.Modal.getInstance(basejs.getElement(N));a.hide()}r(o)&&i(o)&&o()}},C=function(e){var t=H(p,"updatetargeterror"),n=H(p,"cleartargetonerror");if(r(n)&&!0===a(n)){var o=g(T);o.innerHTML=""}var l=r(t)?g(t):g(T);r(l)&&(e.statusCode>=500?document.write(e.response):l.innerHTML=e.response),r(u)&&i(u)&&u()},j=function(){F(h,b),r(c)&&i(c)&&c(),k()};if(r(p)){"button"===p.tagName.toLowerCase()?(h=p,w=M()):(e.preventDefault(),h=y('button[type="submit"]',p),w=M(p)),b=S.apply(h,arguments);var A=[].filter.call(p.attributes,function(e){return/^data-basejs-param-/.test(e.name)});if(l(A))for(let e=0;e<A.length;e++){var D=A[e].name.replace("data-basejs-param-","").toLowerCase(),_=A[e].value;w.append(D,_)}q(L,w,B,C,j)}return!1},D=function(){var e=document.getElementsByClassName("input-validation-error");if(r(e))for(var t=0;t<e.length;t++)e[t].addEventListener("input",_)},_=function(e){var t=v(e);if(d(t)){t.classList.remove("is-invalid"),t.classList.remove("input-validation-error");var n=document.querySelectorAll("[data-valmsg-for='"+t.id.replace("_",".")+"']");if(r(n))for(var o=0;o<n.length;o++)n[o].innerHTML=""}},x=function(e,t,n){var o=v(e),a=null,i=null,u=null,l=null;d(o)?(a=H(o,"copyfieldsourceid"),i=H(o,"copyfieldtargetid"),r(a)&&r(i)&&(u=g(a),l=g(i))):(u=g(t),l=g(n)),p(u)&&p(l)&&(l.value=u.value)},I=function(){var e=document.getElementsByTagName("form"),t=null,n=null,o=null;if(r(e))for(var a=0;a<e.length;a++)t=H(e[a],"posturl"),n=H(e[a],"updatetarget"),o=H(e[a],"listener"),!r(o)&&r(t)&&f(t)&&r(n)&&s(n)&&(e[a].addEventListener("submit",A),e[a].dataset.basejsListener=!0),t=null,n=null},V=function(){var e=document.getElementsByTagName("button"),t=null,n=null,o=null;if(r(e))for(var a=0;a<e.length;a++)t=H(e[a],"copyfieldsourceid"),n=H(e[a],"copyfieldtargetid"),o=H(e[a],"listener"),!r(o)&&r(t)&&r(n)&&(e[a].addEventListener("click",x),e[a].dataset.basejsListener=!0),t=null,n=null},k=function(){I(),j(),D(),V()},R={};R.uniqueId=n,R.exists=r,R.toCamel=o,R.toBool,R.isFunction=i,R.isNodeList=u,R.isArray=l,R.isString=s,R.isBoolean=c,R.isElement=d,R.isUri=f,R.isJson=m,R.isInput=p,R.eventSource=v,R.getElement=g,R.getElementBySelector=y,R.getElementsBySelector=b,R.getElementValue=h,R.getElementUrl=L,R.getFirstForm=E,R.getToken=T,R.show=N,R.hide=w,R.fadeOut=B,R.fadeIn=C,R.setFieldValidations=j,R.showBusy=S,R.showOriginal=F,R.createFormData=M,R.getDataFromTag=H,R.clearValidationSummary=O,R.postForm=q,R.postAndReplace=A,R.initValidations=D,R.copyInputField=x,R.initForms=I,R.initButtons=V,R.init=k,window.basejs=R,domready(k)}();